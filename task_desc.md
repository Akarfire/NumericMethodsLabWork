## TODO
Smax и Smin 
процент s наша / s венгерская (=макс)

## Деградация свёклы
- за единицу времени завод перерабатывает партию сырья массой M (зависит от завода) одного сорта
- n - количество партий свёклы $i = \overline{(1, n)}$

i - номер партии, j - этап переработки
$c_{ij}$ - количество полезного ингредиента (сахара) в начале этапа $j$ (// этап=единица времени, никакого пайплайна переработки свёклы нет)

Параметры  $c_{ij}$ удобно определять через начальную долю полезного ингредиента $c_{i1} = a_i \in [a_{\min}, a_{\max}]$ и коэффициенты деградации $b_{i,j-1} = \frac{c_{ij}}{c_{i,j-1}}, \quad j = 2, \dots, n$
(альтернативное задание матрицы матрица состояний $C$).
 Соответствующие формулы для $c_{ij}$ имеют следующий вид
$$c_{i1} = a_i, \quad c_{ij} = a_i b_{i1} \dots b_{i,j-1}, \quad i = 1, \dots, n, \quad j = 2, \dots, n.$$

//те мы смотрим конкретный завод, и выбираем в каждую единицу времени/период, какую партию переработать
i - номера строк, j - столбцов

## Дозаривание свёклы (дозревание) (доп)
- число этапов в течении, которых свёкла дозревает - ограничено и равно $v,\space 2\leq v \leq [\frac{n}{2}]$
- На этапах дозаривания параметры $b_{ij} \in (1, \beta_{\text{MAX}}], \space i = \overline{1,n};  \space j = \overline{1, v - 1}$, 
- на этапах увядания параметры $b_{ij} \in [\beta_1, \beta_2] \subset (0,1)$,  $j = \overline{v, n - 1}$ рекомендуется брать $\beta_{\text{MAX}} = \frac{n - 1}{n - 2}$.
- $b_{ij} \in [\beta_1; \beta_2] \in (0; 1)$ - некоторый отрезок

В математической модели нужно определить: учитывается процесс дозаривания или нет. 

## Распределение коэффициентов на заданных отрезках
- Говорим о параметрах $a_i$ - начальной сахаристости свёклы и $b_{ij}$ - коэфах деградации
#### Равномерное распределение 
 $b_{ij}$ - распределены равномерно на отрезке $[\beta_1, \beta_2]$

#### Концентрированное 
- У каждого этапа $b_{ij}$  лежат внутри отрезка, длина которого минимум вчетверо меньше исходного
- При каждом  $i$ существует константа  $\delta_i,$ $\delta_i \leq \left| \frac{\beta_2 - \beta_1}{4} \right|$, такая, что $b_{ij} \in [\beta_i^1, \beta_i^2] \subset [\beta_1, \beta_2]$, где $|\beta_i^1 - \beta_i^2| = \delta_i$.
- На отрезке $[\beta_i^1, \beta_i^2]$ параметры $b_{ij}$ распределены равномерно.

>Иначе говоря, в этом случае коэффициенты деградации каждой партии лежат в маленькой окрестности некой точки, то есть деградация свеклы происходит «приблизительно одинаково» на каждом этапе.

Для дозаривания определения аналогичны

>Для случая концентрированного распределения больше подходят те эвристические методы, которые являются оптимальными, при условии, что коэффициенты пропорциональности зависят только от номера строки (партии). 
## Оптимизируем  
- Имеется матрица состояний $\widetilde S = C - \widetilde L$ , где
	- С - Матрица коэффициентов содержания сахара для каждой партии(строки) на каждом этапе(столбыц)
	- $\widetilde L$ - матрица с неотрицательными элементами потери сахара
	- $\widetilde S$ - матрица коэффициентов содержания сахара после учёта потерь
- Последовательность переработки сырья будем описывать перестановкой натуральных чисел от 1 до $n$

$$\sigma = \begin{pmatrix} 
1 & 2 & \dots & n-1 & n \\ 
\sigma(1) & \sigma(2) & \dots & \sigma(n-1) & \sigma(n) 
\end{pmatrix}$$
- Общий выход сахара будем рассчитывать по формуле: $$S(\sigma) = \widetilde{s} _{s(1)1}  \space+\space  \widetilde{s} _{s(2)2}  \space+\space ... \space+\space  \widetilde{s} _{s(n)n}$$
- Масса конечного продукта = $S * M$
- Оптимизация состоит в том, чтобы найти такую перестановку $\sigma$ чисел от 1 до $n$ (последовательность переработки имеющихся партий сырья), при которой $S(\sigma$), будет максимальным. 
	- $\sigma$ - стратегия
	- $\sigma$, при которой $S$ максимальна - максимальная стратегия

#### Суть оптимизации:
В начале этапа j известны только первые j столбцов матрицы, при чём только для партий, ещё не переработанных.
То есть это нечёткая задача о назначениях -> применение венгерского алгоритма (и дургих точных) невозможно. 
// только в рамках компьютерного эксперимента


## Потери сахара
- Рассматривается матрица $\widetilde{S} = C - \widetilde{L}$, где элемент $l_{ij}$ - потери сахара при обработке $i$-ой партии свеклы на $j$-ом этапе. 
- Значение $l_{ij}$ (в %) может быть вычислено по следующей формуле:
	- $l_{ij} = 1.1 + 0.1541 \times (K_i + Na_i) + 0.2159 \times N_i + 0.9989 \times I_{ij} + 0.1967$, где соответствующие значения:
		- $K_i \in [4.8; 7.05]$;
		- $Na_i \in [0.21;0.82]$;
		- $N_i \in [1.58;2.8]$;
		- $I_{ij} = I_{i0} \times (1.029)^{7j - 7}$, где $j$ - номер этапа переработки (нумерация с $1$); 7 - количество дней
		- $I_{i0} \in [0.62;0.64]$.
		
// я так понимаю надо $l_{ij}$ поделить на 100 и можно с исходной C считать
// итоговые коэффициенты для вычисления массы сахара лежат в S

Масса конечного продукта вычисляется по формуле $S = S(\sigma) \times M \times d$, где $d$ - число дней в этапе (//у нас 7).


